# RPSFG (Raw PES Stream File Generalization)

[日本語](README.md) | **English**

A tool for converting PES (Packetized Elementary Stream) files to standard media file formats.

## Overview

PES files generated by certain recording devices cannot be played properly on standard media players.  
RPSFG extracts H.264 video streams and A-LAW audio streams from these PES files,  
and converts them to MKV containers using FFmpeg.

## Features

- **PES Analysis**: PES packet boundary detection compliant with ISO/IEC 13818-1
- **Multi-stream Support**: Simultaneous processing of H.264 video + A-LAW audio
- **Video-only Support**: Supports files without audio tracks
- **Drag & Drop**: Batch processing of multiple files via "Send to" registration etc.
- **UTF-8 Support**: Japanese language support

## Technical Specifications

### Supported Formats

- **Input**: Raw PES files (equivalent to containerless MPEG-PS)
- **Video**: H.264 (ITU-T H.264/ISO 14496-10)
- **Audio**: A-LAW PCM (ITU-T G.711 A-law, 8kHz Mono)
- **Output**: MKV (Matroska Video)

## Requirements

- .NET 8.0 Runtime
- FFmpeg (configured in PATH environment variable)

## Build Instructions

### Standard Build

```bash
dotnet build --configuration Release
```

### WSL Environment Build

```bash
dotnet build --configuration Debug-WSL
```

## Usage

### Command Line

```bash
# Single file processing
RPSFG.exe "input.pes"

# Multiple file processing
RPSFG.exe "file1.pes" "file2.pes" "file3.pes"
```

### Drag & Drop

You can drag and drop PES files directly onto the executable

## Output Files

The following files are generated for each PES file:

- `{filename}_complete.mkv` - Final MKV file
- `{filename}_complete.h264` - Extracted H.264 stream (deleted after processing)
- `{filename}_complete.alaw` - Extracted A-LAW stream (only if audio exists, deleted after processing)

## License

This project is released under the MIT License.  
See [LICENSE.txt](LICENSE.txt) for details.

## Disclaimer

This tool is intended for defensive security purposes.  
The author assumes no responsibility for any damage or harm caused by the use of this tool.  
Please use at your own risk.